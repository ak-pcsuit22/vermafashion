{% extends 'base.html' %}
{% block title %}Admin — All Products — Verma Fashions{% endblock %}
{% block content %}
  <h2>Admin — All Products</h2>
  <section class="admin-product-list">
    {% for p in products %}
      <div class="admin-product card">
        {% if p.image_filename %}
          <img src="/static/uploads/{{ p.image_filename }}" alt="{{ p.name }}">
        {% else %}
          <div class="no-thumb">No image</div>
        {% endif %}
        <div class="admin-product-info">
          <strong>{{ p.name }}</strong>
          <div class="meta">Stock: <strong>{{ p.quantity }}</strong> • Price: ₹{{ '%.2f'|format(p.price) }}</div>
          <div class="desc">{{ p.description }}</div>
          <div class="admin-product-actions">
            <form method="post" action="{{ url_for('admin_update_product_stock', product_id=p.id) }}" class="inline-form">
              <label for="qty_{{ p.id }}">Update stock:</label>
              <input id="qty_{{ p.id }}" type="number" name="quantity" value="{{ p.quantity }}" min="0" style="width:80px">
              <button class="btn" type="submit">Update</button>
            </form>

            <form method="post" action="{{ url_for('admin_delete_product', product_id=p.id) }}" class="inline-form" onsubmit="return confirm('Delete product {{ p.name }}? This cannot be undone.')">
              <button class="btn" type="submit" style="background:#e74c3c">Delete</button>
            </form>
          </div>
        </div>
      </div>
    {% else %}
      <p>No products yet.</p>
    {% endfor %}
  </section>
{% endblock %}
